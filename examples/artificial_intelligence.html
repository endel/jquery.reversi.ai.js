<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="../css/jquery.reversi.css" rel="stylesheet" type="text/css" media="all">
    <title>Artificial Intelligence | jquery.reversi.js</title>

    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">google.load("jquery", "1.4.0");</script>

    <script type="text/javascript" src="../js/jquery.reversi.js"></script>
    <script type="text/javascript">
      $(function() {
        /**
          * Reset previous game and render a new one
          */
        function newGame() {
          return $('#reversi').reversi({
            ai: $.reversi.ai.reinforcementLearning,
            my_color : 'white',
            width: 480,
            height: 480
          });
        }

        /**
          * A.I. Learning Iterations
          * Make the machine play with himself
          */
        function playNextTurn() {
          var iterations = Number($('input#iterations').val());
          var sleepMilliseconds = Number($('input#milliseconds').val());

          if (!$.fn.reversi.isFinished("#reversi")) {
            $.reversi.ai.reinforcementLearning.action( "#reversi", $("#reversi").data("board"), $("#reversi").attr("turn") );
            setTimeout(playNextTurn, sleepMilliseconds+1);
          } else if (iterations > 0) {
            newGame();
            $('input#iterations').val( $('input#iterations').val() - 1 );
            playNextTurn();
          }
        }

        $('button#learn').click(playNextTurn);
        $('button#new-game').click(newGame);
        $('button#new-game').click();
      });
    </script>
  </head>
  <body>
    <div id="wrapper">
      <div id="header">
        <h1>
          <a id="top" href="http://endel.me/">
            Endel Dreyer | Reversi Artificial Intelligence
          </a>
        </h1>
      </div>


      <h2>jquery.reversi.js</h2>
      <p>
        Machine Learning Implementation:
        <a href="https://github.com/endel/jquery.reversi.js">https://github.com/endel/jquery.reversi.js</a>

        <br />
        Original Reversi Script:
        <a href="https://github.com/yamitake/jquery.reversi.js">https://github.com/yamitake/jquery.reversi.js</a>
      </p>

      <h2>Reinforcement Learning</h2>
      <div id="options">
        <p>
          Learn iterations: <input type="text" id="iterations" value="50" size="2" />
          Milliseconds by turn: <input type="text" id="milliseconds" value="0" size="2" />
          <button id="learn">Learn!</button>
          <br />
          <button id="new-game">New game</button>
        </p>
      </div>
      <div id="reversi"></div>

      <div id="footer">
        <p>
          Copyright (C) Endel Dreyer All Rights Reserved.
        </p>
      </div>
    </div>
  </body>
</html>

